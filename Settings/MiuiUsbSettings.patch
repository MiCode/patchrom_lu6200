From fc9b9f1f48912c78c4a7e5a6ed50dc445367dfb7 Mon Sep 17 00:00:00 2001
From: mochangming <mochangming@xiaomi.com>
Date: Thu, 27 Sep 2012 18:22:08 +0800
Subject: [PATCH] call setMassStorage

---
 .../settings/deviceinfo/MiuiUsbSettings.smali      |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

--- a/Settings/smali/com/android/settings/deviceinfo/MiuiUsbSettings.smali
+++ b/Settings/smali/com/android/settings/deviceinfo/MiuiUsbSettings.smali
@@ -353,6 +353,16 @@
 
     invoke-virtual {v2, v3, v1}, Landroid/hardware/usb/UsbManager;->setCurrentFunction(Ljava/lang/String;Z)V
 
+    invoke-virtual {p0}, Lcom/android/settings/deviceinfo/MiuiUsbSettings;->getActivity()Landroid/app/Activity;
+
+    move-result-object v0
+
+    invoke-virtual {v0}, Landroid/app/Activity;->getBaseContext()Landroid/content/Context;
+
+    move-result-object v0
+
+    invoke-static {v0, v1}, Lcom/android/settings/deviceinfo/UsbSettingsControl;->setMassStorage(Landroid/content/Context;Z)Z
+
     iget-object v1, p0, Lcom/android/settings/deviceinfo/MiuiUsbSettings;->mMassStorageFunctionName:Ljava/lang/String;
 
     invoke-direct {p0, v1}, Lcom/android/settings/deviceinfo/MiuiUsbSettings;->updateToggles(Ljava/lang/String;)V
-- 
1.7.1

